# 세광교회 관리자 시스템 가이드

안녕하세요! 세광교회 관리자님을 위한 시스템 설정 및 사용 가이드입니다.
이 문서는 개발자가 아닌 실제 사용자가 시스템을 운영하고 수정해야 할 때 필요한 내용을 담고 있습니다.

## 1. 초기 설정 (필수)

### 🔑 카카오톡 알림톡 설정 (JavaScript 키)
성도님들에게 알림톡을 보내려면 카카오 개발자 센터에서 키를 발급받아야 합니다.

1.11. [카카오 개발자 센터](https://developers.kakao.com/) 접속 및 로그인
12. `내 애플리케이션` -> `애플리케이션 추가하기` (이름: OO교회)
13. 생성된 앱 클릭 -> `요약 정보` -> `JavaScript 키` 복사
4. 프로젝트 폴더의 `.env` 파일을 메모장으로 엽니다.
5. 아래 부분에 복사한 키를 붙여넣으세요.
   ```env
   NEXT_PUBLIC_KAKAO_JS_KEY="여기에_발급받은_키를_붙여넣으세요"
   ```
6. **중요**: 카카오 개발자 센터 -> `플랫폼` -> `Web` -> `사이트 도메인` 등록
20.   - `http://localhost:3000` (테스트용)
21.   - `https://my-church.com` (실제 도메인)

### 🖼️ 교회 로고 및 직인(도장) 변경
성도들에게 발급되는 **기부금 영수증(PDF)** 하단에 찍히는 직인 이미지를 변경하는 방법입니다.

**변경할 파일 위치**: `public/file.svg`

1. 교회의 직인(도장) 이미지를 준비합니다. (배경이 투명한 PNG 파일 권장)
2. 준비한 이미지 파일의 이름을 `file.svg` (또는 사용하는 확장자에 맞게)로 변경합니다.
3. 프로젝트 폴더 내 `public` 폴더 안에 있는 기존 `file.svg`를 삭제하고, 새 파일을 덮어씌웁니다.
   - 만약 파일명이 `stamp.png`라면, 소스 코드(`src/components/DonationReceipt.tsx`)에서 파일명을 수정해야 합니다.
   - **가장 쉬운 방법**: 그냥 기존 `public/file.svg` 파일을 지우고, 새 도장 파일을 `file.svg`라는 이름으로 저장해서 그 자리에 넣으세요.

### 💬 카카오톡 알림톡 문구 및 이미지 변경
알림톡 전송 시 보여지는 **제목, 내용, 이미지**를 수정하는 방법입니다.

**수정할 파일 경로**: `src/components/KakaoShareButton.tsx`

1. 이 파일을 메모장이나 코드 에디터로 엽니다.
2. 약 **36~44번째 줄** 근처를 찾으세요.
42.    ```typescript
43.    content: {
44.      title: 'OO교회 기부금 영수증 발급 안내', // 제목 수정
45.      description: `${user.name} 성도님...`,    // 내용 수정 ( ` ` 안에 있는 글자는 그대로 두세요! )
     // imageUrl: 카카오톡 메시지에 뜰 이미지입니다.
     imageUrl: 'https://...', // 이미지 주소 수정 (인터넷 주소만 가능)
   ```
3. `imageUrl`에는 내 컴퓨터에 있는 파일이 아니라, **인터넷에 올라와 있는 이미지 주소(URL)**를 넣어야 합니다.
   - 예: 교회 홈페이지 로고 우클릭 -> '이미지 주소 복사' 후 붙여넣기

### 🏢 기부금 영수증 교회 정보 수정
기부금 영수증에 들어가는 **사업자 번호, 교회 주소, 대표자 성명** 등을 수정하는 방법입니다.

**수정할 파일 경로**: `src/components/DonationReceipt.tsx`

1. 이 파일을 메모장이나 코드 에디터로 엽니다.
2. 약 **150~160번째 줄** 근처를 찾으세요. (또는 '세광교회'로 검색)
3. 아래 내용을 실제 정보로 수정하세요.
   ```tsx
   <View style={styles.row}>
     <View style={styles.colHeader}><Text>기부금 단체</Text></View>
     <View style={styles.colContent}>
       <Text>단 체 명 : 대한예수교장로회 OO교회</Text> {/* 교회 이름 수정 */}
       <Text>사업자등록번호 : 123-45-67890</Text>        {/* 사업자 번호 수정 */}
       <Text>소 재 지 : 서울특별시 강남구 테헤란로 123</Text> {/* 주소 수정 */}
       <Text>대 표 자 : 김목사</Text>                    {/* 담임목사님 성함 수정 */}
     </View>
   </View>
   ```
4. 수정 후 저장하면 바로 반영됩니다.

---

## 2. 관리자 기능 사용법

### 👥 교인 등록 (방법 A)
관리자가 교인의 정보를 미리 등록하고 계정을 생성해주는 방식입니다.

1. **관리자 페이지** (`/admin`) 접속
2. **새 교인 등록** 폼 작성
88.    - **이름**: 홍길동
89.    - **전화번호**: 010-1234-5678 (필수! 비밀번호 생성용)
90.    - **아이디**: `hong@church.com` (원하는 이메일 형식 입력)
91.    - **비밀번호**: 전화번호 입력 시 **자동으로 뒷자리 4자리**가 입력됩니다. (수정 가능)
   - **주소**: 돋보기 버튼 클릭 -> 주소 검색 후 선택
3. **[교인 등록하기]** 버튼 클릭 (오른쪽 하단)

### 📨 단체 알림톡 전송
1. **교인 목록**에서 알림톡을 보낼 성도들을 체크박스로 선택합니다. (전체 선택 가능)
2. 목록 상단에 **[N명에게 알림톡 전송]** 노란색 버튼이 나타납니다.
3. 버튼을 누르면 선택된 성도들에게 알림톡이 발송됩니다.

### 💰 회계 장부 관리
- **엑셀 다운로드**: 관리자만 가능합니다. 전체 데이터를 백업하거나 수정할 때 사용하세요. **(개인정보 주의!)**
- **PDF 출력**: 성도들이 본인의 기부금 영수증을 출력하는 용도입니다.

---

## 3. 자주 묻는 질문 (FAQ)

**Q. 비밀번호를 잊어버렸어요!**
A. 관리자 페이지에서 해당 교인의 정보를 수정하거나, 교인이 로그인 화면에서 '비밀번호 찾기'를 이용할 수 있습니다. (초기 비밀번호는 전화번호 뒷자리 4자리입니다.)

**Q. 주소 검색창이 안 떠요.**
A. 일시적인 오류일 수 있습니다. 새로고침(F5) 후 다시 시도해 주세요. 계속 안 되면 개발자에게 문의하세요.

**Q. 엑셀 파일은 누구에게 줘야 하나요?**
A. **절대 일반 성도에게 주지 마세요.** 모든 성도의 헌금 내역과 개인정보가 포함되어 있습니다. 재정부장님이나 담임목사님만 관리하셔야 합니다.
